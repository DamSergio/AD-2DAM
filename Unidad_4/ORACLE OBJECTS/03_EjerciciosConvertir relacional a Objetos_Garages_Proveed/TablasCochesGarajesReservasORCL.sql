
DROP TABLE CLIENTES CASCADE CONSTRAINTS;

DROP TABLE GARAJES  CASCADE CONSTRAINTS;

DROP TABLE COCHES   CASCADE CONSTRAINTS;

DROP TABLE RESERVAS CASCADE CONSTRAINTS;

DROP TABLE RESERVA_COCHES CASCADE CONSTRAINTS;



PURGE RECYCLEBIN;


CREATE TABLE CLIENTES 
    ( 
     COD_CLIENTE NUMBER (4)  NOT NULL , 
     NOMBRE VARCHAR2 (15 BYTE) , 
     DIRECCION VARCHAR2 (15 BYTE) , 
     POBLACION VARCHAR2 (15 BYTE) , 
     FECHA_NAC DATE 
    ) ;



ALTER TABLE CLIENTES 
    ADD CONSTRAINT CLIENTES_PK PRIMARY KEY ( COD_CLIENTE ) ;



CREATE TABLE COCHES 
    ( 
     COD_COCHE NUMBER (4)  NOT NULL , 
     MODELO VARCHAR2 (15 BYTE) , 
     MATRICULA VARCHAR2 (15 BYTE) , 
     COD_GARAJE NUMBER (4)  NOT NULL , 
     PRECIO_DIA NUMBER (4) , 
     KILOMETROS NUMBER (6) 
    ) ;



ALTER TABLE COCHES 
    ADD CONSTRAINT COCHES_PK PRIMARY KEY ( COD_COCHE ) ;



CREATE TABLE GARAJES 
    ( 
     COD_GARAJE NUMBER (4)  NOT NULL , 
     NOMBRE VARCHAR2 (15 BYTE) , 
     DIRECCION VARCHAR2 (15 BYTE) , 
     POBLACION VARCHAR2 (15 BYTE) 
    ) ;



ALTER TABLE GARAJES 
    ADD CONSTRAINT GARAJES_PK PRIMARY KEY ( COD_GARAJE ) ;



CREATE TABLE RESERVAS 
    ( 
     COD_RESERVA NUMBER (4)  NOT NULL , 
     COD_CLIENTE NUMBER (4)  NOT NULL , 
     FECHA_COMIENZO DATE , 
     FECHA_FIN DATE , 
     NOMBRE_AGENCIA VARCHAR2 (15 BYTE) 
    ) ;



ALTER TABLE RESERVAS 
    ADD CONSTRAINT RESERVAS_PK PRIMARY KEY ( COD_RESERVA ) ;



CREATE TABLE RESERVA_COCHES 
    ( 
     COD_RESERVA NUMBER (4)  NOT NULL , 
     COD_COCHE NUMBER (4)  NOT NULL , 
     KIL_REALIZADOS NUMBER (6) 
    ) ;



ALTER TABLE RESERVA_COCHES 
    ADD CONSTRAINT RESERVA_COCHES__IDX PRIMARY KEY ( COD_RESERVA, COD_COCHE ) ;


ALTER TABLE RESERVA_COCHES 
    ADD CONSTRAINT FK_ASS_8 FOREIGN KEY 
    ( 
     COD_RESERVA
    ) 
    REFERENCES RESERVAS 
    ( 
     COD_RESERVA
    ) 
    ON DELETE CASCADE ;


ALTER TABLE RESERVA_COCHES 
    ADD CONSTRAINT FK_ASS_9 FOREIGN KEY 
    ( 
     COD_COCHE
    ) 
    REFERENCES COCHES 
    ( 
     COD_COCHE
    ) 
    ON DELETE CASCADE ;


ALTER TABLE COCHES 
    ADD CONSTRAINT Relation_2 FOREIGN KEY 
    ( 
     COD_GARAJE
    ) 
    REFERENCES GARAJES 
    ( 
     COD_GARAJE
    ) ;


ALTER TABLE RESERVAS 
    ADD CONSTRAINT Relation_3 FOREIGN KEY 
    ( 
     COD_CLIENTE
    ) 
    REFERENCES CLIENTES 
    ( 
     COD_CLIENTE
    ) ;




------ ENTRADA DE DATOS

------------------------------------------------------------------
INSERT INTO CLIENTES VALUES(1,'CLIENTE1','C/MADRID 10','TALAVERA','10/11/1970');
INSERT INTO CLIENTES VALUES(2,'CLIENTE2','C/ALFARES 30','TALAVERA','06/10/1975');
INSERT INTO CLIENTES VALUES(3,'CLIENTE3','C/PORTILLO 100','TALAVERA','09/05/1980');
INSERT INTO CLIENTES VALUES(4,'CLIENTE4','C/MAYOR 1','MADRID','09/09/1981');
INSERT INTO CLIENTES VALUES(5,'CLIENTE5','C/LOS OLIVOS 15','TOLEDO','06/07/1974');

------------------------------------------------------------------
INSERT INTO GARAJES VALUES(1,'GARAJE1','POLIGONO MADRID','TALAVERA');
INSERT INTO GARAJES VALUES(2,'GARAJE2','BERCIAL 10','TALAVERA');
INSERT INTO GARAJES VALUES(3,'GARAJE3','POLIGONO RIBERA','MADRID');
INSERT INTO GARAJES VALUES(4,'GARAJE4','POLIGONO TRIGO','MADRID');

------------------------------------------------------------------
INSERT INTO COCHES VALUES(1,'SEAT IBIZA','1234-BBC',1,100,50000);
INSERT INTO COCHES VALUES(2,'SEAT CORDOBA','1234-BCC',1,150,20000);
INSERT INTO COCHES VALUES(3,'OPEL CORSA','9988-BBC',1,100,65000);

INSERT INTO COCHES VALUES(4,'OPEL CORSA','2311-BBM',2,100,35000);
INSERT INTO COCHES VALUES(5,'OPEL VECTRA','0034-BBF',2,160,10000);
INSERT INTO COCHES VALUES(6,'PEUGEOT 205','9934-BNM',2,100,25000);

INSERT INTO COCHES VALUES(7,'PEUGEOT 207','1298-BMZ',3,180,20000);
INSERT INTO COCHES VALUES(8,'PEUGEOT 207','1098-CBC',3,180,35000);
INSERT INTO COCHES VALUES(9,'SEAT ALTEA','2404-BZC',3,180,41500);
INSERT INTO COCHES VALUES(10,'SEAT IBIZA','2234-BBZ',3,100,55000);

------------------------------------------------------------------
INSERT INTO RESERVAS VALUES(1,1,SYSDATE-90,SYSDATE-80,'BARCELÓ');
INSERT INTO RESERVAS VALUES(2,1,SYSDATE-85,SYSDATE-75,'GLOBO');
INSERT INTO RESERVAS VALUES(3,1,SYSDATE-70,SYSDATE-60,'MOBILE');

INSERT INTO RESERVAS VALUES(4,2,SYSDATE-50,SYSDATE-40,'BARCELÓ');
INSERT INTO RESERVAS VALUES(5,2,SYSDATE-100,SYSDATE-95,'GLOBO');
INSERT INTO RESERVAS VALUES(6,2,SYSDATE-40,SYSDATE-30,'MARSAN');

INSERT INTO RESERVAS VALUES(7,3,SYSDATE-150,SYSDATE-140,'BARCELÓ');
INSERT INTO RESERVAS VALUES(8,3,SYSDATE-210,SYSDATE-195,'GLOBO');

INSERT INTO RESERVAS VALUES(9,4,SYSDATE-240,SYSDATE-230,'MARSAN');

INSERT INTO RESERVAS VALUES(10,1,SYSDATE,SYSDATE+10,'BARCELÓ');
INSERT INTO RESERVAS VALUES(11,1,SYSDATE-15,SYSDATE-5,'VUELIN');
INSERT INTO RESERVAS VALUES(12,1,SYSDATE-20,SYSDATE-10,'MARSAN');

INSERT INTO RESERVAS VALUES(13,2,SYSDATE,SYSDATE+5,'EVEREST');
INSERT INTO RESERVAS VALUES(14,2,SYSDATE,SYSDATE+10,'BARCELÓ');

INSERT INTO RESERVAS VALUES(15,3,SYSDATE-25,SYSDATE-15,'EVEREST');
INSERT INTO RESERVAS VALUES(16,3,SYSDATE-30,SYSDATE-20,'VUELIN');
INSERT INTO RESERVAS VALUES(17,3,SYSDATE-5,SYSDATE+5,'MARSAN');

INSERT INTO RESERVAS VALUES(18,4,SYSDATE-2,SYSDATE+10,'EVEREST');
INSERT INTO RESERVAS VALUES(19,4,SYSDATE+2,SYSDATE+10,'EVEREST');



------------------------------------------------------------------
INSERT INTO RESERVA_COCHES VALUES(1,1,0);
INSERT INTO RESERVA_COCHES VALUES(1,7,0);
INSERT INTO RESERVA_COCHES VALUES(1,8,0);

INSERT INTO RESERVA_COCHES VALUES(2,2,0);
INSERT INTO RESERVA_COCHES VALUES(2,3,0);
INSERT INTO RESERVA_COCHES VALUES(2,4,0);
INSERT INTO RESERVA_COCHES VALUES(2,5,0);

INSERT INTO RESERVA_COCHES VALUES(3,1,0);
INSERT INTO RESERVA_COCHES VALUES(3,9,0);

INSERT INTO RESERVA_COCHES VALUES(4,6,0);

INSERT INTO RESERVA_COCHES VALUES(5,1,0);

INSERT INTO RESERVA_COCHES VALUES(6,4,0);

INSERT INTO RESERVA_COCHES VALUES(7,1,0);

INSERT INTO RESERVA_COCHES VALUES(8,4,0);

INSERT INTO RESERVA_COCHES VALUES(9,2,0);
INSERT INTO RESERVA_COCHES VALUES(9,3,0);

INSERT INTO RESERVA_COCHES VALUES(10,1,0);
INSERT INTO RESERVA_COCHES VALUES(10,2,0);
INSERT INTO RESERVA_COCHES VALUES(10,3,0);

INSERT INTO RESERVA_COCHES VALUES(11,4,0);

INSERT INTO RESERVA_COCHES VALUES(12,1,0);

INSERT INTO RESERVA_COCHES VALUES(13,10,0);

INSERT INTO RESERVA_COCHES VALUES(14,5,0);
INSERT INTO RESERVA_COCHES VALUES(14,6,0);

INSERT INTO RESERVA_COCHES VALUES(15,7,0);

INSERT INTO RESERVA_COCHES VALUES(16,1,0);

INSERT INTO RESERVA_COCHES VALUES(17,1,0);

INSERT INTO RESERVA_COCHES VALUES(18,8,0);

INSERT INTO RESERVA_COCHES VALUES(19,9,0);


------------------------------------------------------------------

commit;